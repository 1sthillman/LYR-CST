# ğŸ¯ **KARAOKE NOT PRO - CURSOR AI KURALLARI (.cursorrules)**

AÅŸaÄŸÄ±daki kurallarÄ± projenin ana dizinine `.cursorrules` dosyasÄ± olarak kaydet. Bu kurallar sayesinde yapay zeka **asla hata yapmayacak, saÃ§malamayacak** ve **sadece istediÄŸiniz ÅŸekilde** kod Ã¼retecek.

---

## ğŸ“ **1. PROJE GENEL KURALLARI (KESÄ°N Ä°LKELER)**

```markdown
# PROJE MUTLAKA REACT + TYPESCRIPT + TAILWIND CSS ile olacak
# SADECE functional components ve React Hooks kullanÄ±lacak (Class component ASLA)
# Her component .tsx uzantÄ±lÄ± olacak ve TypeScript strict mode kurallarÄ±na uyacak
# TÃ¼rkÃ§e yorumlar ve aÃ§Ä±klamalar kullanÄ±lacak, kod iÃ§inde Ä°NGÄ°LÄ°ZCE ASLA
# Kod tekrarÄ± %0 olacak - herhangi bir kod bloÄŸu 2 kez tekrarlanmayacak
# Component'ler maximum 150 satÄ±r olacak, daha uzunsa mutlaka parÃ§alanacak
# Her fonksiyon tek bir iÅŸ yapacak (Single Responsibility Principle)
# Default export ASLA kullanÄ±lmayacak, named export zorunlu
# Props interface'leri her zaman ayrÄ± tanÄ±mlanacak (inline type ASLA)
```

---

## ğŸ›  **2. TEKNOLOJÄ° STACKÄ° ve KULLANIM KURALLARI**

```markdown
# React 18+ ve React Hooks (useState, useEffect, useRef, useCallback, useMemo) zorunlu
# TypeScript strict mode aktif - her deÄŸiÅŸkenin tipi explicit belirtilecek (infer ASLA)
# Tailwind CSS ile styling - inline style ASLA, <style> tag'i ASLA
# Framer Motion ile animasyonlar - CSS transition/animation ASLA
# TensorFlow.js @tensorflow/tfjs ve @tensorflow-models/speech-commands
# SQLite better-sqlite3 ile local veritabanÄ±
# Eklenecek baÄŸÄ±mlÄ±lÄ±klar: lucide-react, framer-motion, tailwindcss, better-sqlite3, @tensorflow/tfjs, @tensorflow-models/speech-commands
# ASLA baÅŸka kÃ¼tÃ¼phane Ã¶nerme - yukarÄ±daki stack dÄ±ÅŸÄ±ndakileri kullanma
```

---

## ğŸ“ **3. REACT TYPESCRIPT KOD STANDARTLARI**

```typescript
// DOÄRU âœ…
interface Props {
  lyrics: string;
  songId: number;
  onComplete?: (accuracy: number) => void;
}

export const Component: React.FC<Props> = ({ lyrics, songId, onComplete }) => {
  const [isListening, setIsListening] = useState<boolean>(false);
  
  const handleStart = useCallback(async () => {
    // Sadece bir iÅŸ
  }, []);
  
  return <div>...</div>;
}

// YANLIÅ âŒ (ASLA BUNU YAPMA)
export default function Component(props) {
  const [state, setState] = useState(false); // tip belirtilmemiÅŸ
  
  function handle() { // useCallback yok
    // bir sÃ¼rÃ¼ iÅŸ
  }
  
  return <div style={{ color: 'red' }}>...</div>; // inline style
}
```

**KURAL:**
```
- Her component FC generic tipi ile baÅŸlayacak
- useCallback ve useMemo ile performans optimizasyonu zorunlu
- async/await kullanÄ±lacak, then/catch ASLA
- Error boundary her component'te olacak
- Her hook'un dependency array'i eksiksiz olacak
- Custom hook'lar use prefix ile baÅŸlayacak (useSpeechRecognition)
```

---

## ğŸ¨ **4. TASARIM ve UI/UX MUTLAK KURALLARI**

```markdown
# Glassmorphism efekti MUTLAKA kullanÄ±lacak: bg-white/5 backdrop-blur-xl border border-white/10
# Border radius minimum 12px (rounded-xl), kartlar iÃ§in 24px (rounded-2xl)
# TÃ¼m butonlarda motion.button kullanÄ±lacak ve whileHover/whileTap olacak
# Renk paleti: Sadece purple-500 (#a855f7), pink-500 (#ec4899), gray-900, gray-800, white/5
# Gradientler sadece bg-gradient-to-r from-purple-500 to-pink-500 olacak
# Shadow efektleri her zaman: shadow-purple-500/40 ve hover'da shadow-purple-500/60
# Animasyonlar sadece spring tipi olacak: transition={{ type: 'spring', stiffness: 100 }}
# Opacity fade-in/out kullanÄ±lacak, opacity deÄŸerleri 0.1 aralÄ±klarla olacak
# Z-index'ler 10, 20, 30, 40, 50 olarak katmanlÄ± olacak
# Custom scrollbar MUTLAKA premium.css'deki gibi olacak
```

---

## ğŸ—„ **5. SQLITE ve VERÄ°TABANI KURALLARI**

```typescript
// DOÄRU âœ…
class DatabaseService {
  private db: Database.Database;

  constructor() {
    this.db = new Database('karaoke.db');
    this.initialize();
  }

  private initialize(): void {
    this.db.exec(`
      CREATE TABLE IF NOT EXISTS songs (
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        title TEXT NOT NULL,
        artist TEXT NOT NULL,
        lyrics TEXT NOT NULL,
        created_at DATETIME DEFAULT CURRENT_TIMESTAMP
      );
    `);
  }

  getSongById(id: number): Song | undefined {
    return this.db.prepare('SELECT * FROM songs WHERE id = ?').get(id) as Song | undefined;
  }
}

export default new DatabaseService();

// YANLIÅ âŒ (ASLA)
const db = new Database('karaoke.db'); // class iÃ§inde olmayan
// string SQL, prepared statement olmadan
```

**KURAL:**
```
- Prepared statements zorunlu (SQL injection Ã¶nlemi)
- Transaction kullanÄ±lacak Ã§oklu iÅŸlemlerde
- Her veritabanÄ± metodu try/catch iÃ§inde olacak
- create_at DATETIME DEFAULT CURRENT_TIMESTAMP her zaman
- Foreign key constraints aktif olacak
- Tek bir instance olacak (Singleton pattern)
```

---

## ğŸ¤– **6. TENSORFLOW.JS ve KONUÅMA TANIMA KURALLARI**

```typescript
// DOÄRU âœ…
export class SpeechRecognitionService {
  private recognizer: speechCommands.SpeechCommandRecognizer | null = null;
  private MIN_CONFIDENCE = 0.75;

  async initialize(): Promise<void> {
    await tf.ready();
    this.recognizer = speechCommands.create('BROWSER_FFT');
    await this.recognizer.ensureModelLoaded();
    
    await this.recognizer.listen(
      (result) => this.handleResult(result),
      {
        includeSpectrogram: false,
        probabilityThreshold: this.MIN_CONFIDENCE,
      }
    );
  }

  private handleResult(result: speechCommands.SpeechCommandRecognizerResult): void {
    const scores = result.scores as Float32Array;
    const maxScore = Math.max(...scores);
    // ...
  }
}

// YANLIÅ âŒ
recognizer.listen(callback); // opsiyonlar yok
// tip belirtmeleri yok, any kullanÄ±mÄ±
```

**KURAL:**
```
- tf.ready() her zaman await edilecek
- Model yÃ¼klenene kadar loading state olacak
- Probability threshold minimum 0.75 olacak
- Her kelime iÅŸlendikten sonra memory temizliÄŸi (tf.tidy)
- Model dispose edilecek component unmount'ta
- WebGL backend kullanÄ±lacak: tf.setBackend('webgl')
- overlapFactor 0.5 olacak
```

---

## âš¡ **7. PERFORMANS ve OPTÄ°MÄ°ZASYON MUTLAK KURALLARI**

```markdown
- React.memo() ile component memoization zorunlu
- useCallback ile her fonksiyon wrap edilecek
- useMemo ile hesaplamalar cache'lenecek
- Large lists iÃ§in virtual scrolling (react-window) kullanÄ±lacak
- Image optimizasyon: WebP format, lazy loading
- Code splitting: dynamic import() kullanÄ±lacak
- TensorFlow modeli lazy load edilecek
- SQLite baÄŸlantÄ±sÄ± singleton olacak
- Event listener'lar useEffect cleanup ile kaldÄ±rÄ±lacak
- RAF (requestAnimationFrame) kullanÄ±lacak animasyonlarda
- Memory leak Ã¶nlemi: component unmount'ta tÃ¼m subscription'lar temizlenecek
```

---

## ğŸ›¡ **8. HATA YÃ–NETÄ°MÄ° ve DEBUG KURALLARI**

```typescript
// DOÄRU âœ…
try {
  await this.recognizer.listen(...);
} catch (error) {
  if (error instanceof Error) {
    console.error('Hata:', error.message);
    toast.error(`Mikrofon hatasÄ±: ${error.message}`);
    this.handleError('MICROPHONE_ACCESS_DENIED');
  }
}

// YANLIÅ âŒ
catch (e) { console.log(e); } // generic hata
```

**KURAL:**
```
- Her async iÅŸlem try/catch iÃ§inde olacak
- Error boundary component'leri her sayfada olacak
- Toast notification'lar react-hot-toast ile
- Error log'larÄ± SQLite'a kaydedilecek (error_logs table)
- User-friendly hata mesajlarÄ±, teknik jargon yok
- Error code system: 'MICROPHONE_ACCESS_DENIED', 'MODEL_LOAD_FAILED'
- Fallback UI'lar her zaman olacak
- Sentry veya benzeri error tracking entegre edilecek (opsiyonel)
```

---

## ğŸ“‚ **9. DOSYA YAPISI ve ORGANÄ°ZASYON KURALLARI**

```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Layout/          # Header, Footer, Navigation
â”‚   â”œâ”€â”€ Song/           # SongCard, SongList, SongForm
â”‚   â”œâ”€â”€ Player/         # KaraokePlayer, Controls, LyricsDisplay
â”‚   â”œâ”€â”€ Dashboard/      # Stats, Charts, Performance
â”‚   â”œâ”€â”€ Background/     # GradientBackground, Particles
â”‚   â””â”€â”€ Loading/        # Skeletons, Spinners
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ SpeechRecognitionService.ts
â”‚   â””â”€â”€ AudioProcessingService.ts
â”œâ”€â”€ engine/
â”‚   â”œâ”€â”€ LyricsMatcher.ts
â”‚   â””â”€â”€ WordValidator.ts
â”œâ”€â”€ database/
â”‚   â”œâ”€â”€ DatabaseService.ts
â”‚   â””â”€â”€ migrations/
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useSpeechRecognition.ts
â”‚   â”œâ”€â”€ useLyricsSync.ts
â”‚   â””â”€â”€ useTheme.ts
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ stringUtils.ts
â”‚   â”œâ”€â”€ audioUtils.ts
â”‚   â””â”€â”€ validation.ts
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts        # TÃ¼m TypeScript interface'leri
â”œâ”€â”€ store/              # Zustand/Jotai store'lar
â”œâ”€â”€ styles/
â”‚   â”œâ”€â”€ premium.css
â”‚   â””â”€â”€ animations.css
â””â”€â”€ App.tsx
```

**KURAL:**
```
- Her klasÃ¶r index.ts ile export edilecek (barrel export)
- Import path'ler absolute: '@components/...' ÅŸeklinde
- Her component kendi klasÃ¶rÃ¼nde: Component.tsx, index.ts, types.ts
- Asset'ler public/ iÃ§inde, optimize edilmiÅŸ
- Environment variable'lar .env.local'de, prefix: VITE_KARAOKE_
```

---

## ğŸ’¬ **10. CEVAP VERME ve Ä°LETÄ°ÅÄ°M KURALLARI**

```markdown
# KullanÄ±cÄ±yla her zaman TÃœRKÃ‡E konuÅŸacaksÄ±n
# Kod Ã¶rneÄŸi verirken SADECE Ã§alÄ±ÅŸan, eksiksiz kod vereceksin
# Yorum satÄ±rlarÄ± TÃ¼rkÃ§e ve detaylÄ± olacak
# AÃ§Ä±klama yaparken "ÅÃ¶yle yapabilirsin" demeyeceksin, "ÅÃ–YLE YAPACAKSIN" diyecek ve direkt kod vereceksin
- Her cevaptan Ã¶nce kullanÄ±cÄ±n isteÄŸini analiz edeceksin
- EÄŸer eksik bilgi varsa, varsayÄ±m yapmayacaksÄ±n, SORU soracaksÄ±n
- KullanÄ±cÄ± "profesyonel" dediyse, production-ready kod vereceksin
- Error handling, loading states, typescript types olmadan kod vermeyeceksin
- Her zaman best practices ve modern pattern'leri kullanacaksÄ±n
- KullanÄ±cÄ± "premium" dediyse, glassmorphism, animation, micro-interaction eklemeyi unutmayacaksÄ±n
- kodu Ã¼Ã§ bÃ¶lÃ¼m halinde verme, TAMAMINI tek seferde vereceksin
- EÄŸer bir ÅŸeyin doÄŸru olmadÄ±ÄŸÄ±ndan emin deÄŸilsen, KESÄ°NLÄ°KLE kod yazmayacaksÄ±n, Ã¶nce soracaksÄ±n
```

---

## ğŸš€ **11. KOPYALA-YAPIÅTIR HAZIR .cursorrules DOSYASI**

Projenin ana dizinine `.cursorrules` adÄ±yla kaydet:

```text
# KARAOKE NOT PRO - CURSOR AI MUTLAK KURALLARI

## PROJE GENEL
- REACT + TYPESCRIPT + TAILWIND CSS ONLY
- Functional components + Hooks ONLY (Class component YASAK)
- Maximum 150 satÄ±r per component
- Named exports ONLY (Default export YASAK)
- TÃ¼rkÃ§e yorumlar, Ä°ngilizce YASAK
- Kod tekrarÄ± %0 (DRY principle)
- Her fonksiyon 1 iÅŸ yapacak (Single Responsibility)

## TEKNOLOJÄ° STACK
- React 18+, TypeScript (strict mode), Tailwind CSS 3+
- Framer Motion (animasyonlar), Lucide React (ikonlar)
- TensorFlow.js 4.x, @tensorflow-models/speech-commands
- Better-sqlite3 (SQLite), sql.js (fallback)
- Sadece yukarÄ±daki kÃ¼tÃ¼phaneler kullanÄ±lacak, baÅŸka Ã¶neri YOK

## TYPESCRIPT KURALLARI
- Her deÄŸiÅŸkenin explicit tipi olacak (infer YASAK)
- Her prop interface'i ayrÄ± tanÄ±mlanacak
- async/await ONLY (then/catch YASAK)
- Generic types kullanÄ±lacak: React.FC<Props>
- Error types: catch (error: unknown) { if (error instanceof Error) ... }

## REACT KURALLARI
- useCallback ile HER fonksiyon wrap edilecek
- useMemo ile hesaplamalar cache'lenecek
- useEffect dependency array eksiksiz olacak
- Custom hooks: use prefix zorunlu
- React.memo() ile component memoization zorunlu
- Error boundary her sayfada olacak

## TASARIM MUTLAKLARI
- Glassmorphism: bg-white/5 backdrop-blur-xl border border-white/10
- Border radius min 12px (rounded-xl), kartlar 24px (rounded-2xl)
- Sadece renkler: purple-500, pink-500, gray-900/800, white/5
- Gradient: bg-gradient-to-r from-purple-500 to-pink-500 ONLY
- Animasyon: Framer Motion spring physics ONLY
- Shadow: shadow-purple-500/40, hover:shadow-purple-500/60
- Custom scrollbar premium.css'deki gibi

## SQLITE KURALLARI
- Prepared statements ZORUNLU (SQL injection Ã¶nlemi)
- Transactions Ã§oklu iÅŸlemlerde
- Singleton pattern: tek instance
- try/catch her metotta
- created_at DATETIME DEFAULT CURRENT_TIMESTAMP
- Foreign key constraints aktif

## TENSORFLOW.JS KURALLARI
- tf.ready() her zaman await edilecek
- Probability threshold MIN 0.75
- WebGL backend: tf.setBackend('webgl')
- overlapFactor: 0.5
- Memory tf.tidy() ile temizlenecek
- Model dispose edilecek (cleanup)
- Loading state olacak

## HATA YÃ–NETÄ°MÄ°
- Her async iÅŸlem try/catch iÃ§inde
- Toast notification: react-hot-toast
- User-friendly mesajlar, teknik jargon YOK
- Error codes: 'MICROPHONE_ACCESS_DENIED', 'MODEL_LOAD_FAILED'
- SQLite error_logs table'a kaydedilecek
- Fallback UI her zaman

## PERFORMANS
- React.memo, useCallback, useMemo zorunlu
- Virtual scrolling 50+ item iÃ§in
- Code splitting: dynamic import()
- TensorFlow model lazy load
- Event listener cleanup useEffect return
- RAF animasyonlarda
- Image optimizasyon: WebP, lazy loading

## DOSYA YAPISI
- Barrel exports (index.ts) her klasÃ¶rde
- Absolute imports: @components/...
- Her component kendi klasÃ¶rÃ¼nde: Component.tsx, index.ts, types.ts
- Assetler public/, optimize edilmiÅŸ
- Env variables: VITE_KARAOKE_*

## CEVAP VERME
- Sadece TÃœRKÃ‡E konuÅŸ
- Sadece Ã§alÄ±ÅŸan, eksiksiz kod ver
- "ÅÃ¶yle yapabilirsin" deme, "ÅÃ–YLE YAPACAKSIN" de ve kod ver
- Eksik bilgi varsa SORU sor, varsayÄ±m YAPMA
- Production-ready kod: loading, error, typescript
- Premium dediyse glassmorphism, animation ekle
- Kodu tek parÃ§a halinde ver, Ã¼Ã§e bÃ¶lme
- Emin deÄŸilsen KOD YAZMA, Ã¶nce sor
```

---

---
alwaysApply: true
---
